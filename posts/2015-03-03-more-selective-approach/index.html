<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jan Vanhove">
<meta name="dcterms.date" content="2015-03-03">

<title>Jan Vanhove :: Blog - A more selective approach to reporting statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jan Vanhove :: Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html" rel="" target="">
 <span class="menu-text">Blog archive</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html" rel="" target="">
 <span class="menu-text">Teaching resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../archive.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-intelligibility-factor" id="toc-the-intelligibility-factor" class="nav-link active" data-scroll-target="#the-intelligibility-factor">The intelligibility factor</a></li>
  <li><a href="#highlighting-the-take-home-message" id="toc-highlighting-the-take-home-message" class="nav-link" data-scroll-target="#highlighting-the-take-home-message">Highlighting the take-home message</a></li>
  <li><a href="#a-look-at-daniëls-example" id="toc-a-look-at-daniëls-example" class="nav-link" data-scroll-target="#a-look-at-daniëls-example">A look at Daniël’s example</a></li>
  <li><a href="#an-alternative-write-up" id="toc-an-alternative-write-up" class="nav-link" data-scroll-target="#an-alternative-write-up">An alternative write-up</a></li>
  <li><a href="#wrapping-up" id="toc-wrapping-up" class="nav-link" data-scroll-target="#wrapping-up">Wrapping up</a></li>
  <li><a href="#acknowledgements-and-further-reading" id="toc-acknowledgements-and-further-reading" class="nav-link" data-scroll-target="#acknowledgements-and-further-reading">Acknowledgements and further reading</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A more selective approach to reporting statistics</h1>
  <div class="quarto-categories">
    <div class="quarto-category">effect sizes</div>
    <div class="quarto-category">graphs</div>
    <div class="quarto-category">simplicity</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jan Vanhove </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 3, 2015</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p><a href="http://daniellakens.blogspot.ch/2015/02/which-statistics-should-you-report.html">Daniël Lakens</a> recently argued that, when reporting statistics in a research paper, ‘the more the merrier’, since reporting several descriptive and inferential statistics facilitates the aggregation of research results. In this post, I argue that there are other factors to be considered that can tip the scale in favour of a more selective approach to reporting statistics.</p>
<p>Before I present my case, I’d like to stress that Daniël and I agree on the key issue: we both advocate making data freely available whenever possible so that researchers can scrutinise, learn from and elaborate on each others’ findings.</p>
<p>That said, his suggestion to report more statistics presents me with an opportunity to argue for the precise opposite. It is not my intention to offer a blanket recommendation about which statistics to report and which not, but rather to highlight two factors that should inform this decision:</p>
<ol type="1">
<li><p>More statistics make the text more difficult to read, and communication could suffer as a result.</p></li>
<li><p>Selectivity is inherent to data reporting. Ideally, this forces us to think about how our theories and data link up, and how we could most efficiently communicate the patterns in the data in light of our theoretical notions.</p></li>
</ol>
<p>I’ll briefly discuss these two factors before turning to Daniël’s specific example.</p>
<section id="the-intelligibility-factor" class="level2">
<h2 class="anchored" data-anchor-id="the-intelligibility-factor">The intelligibility factor</h2>
<p>Research papers tend to contain too many significance tests, many of which are irrelevant to the authors’ research question (e.g.&nbsp;<a href="../2014-09-26-balance-tests">here</a> and <a href="../2014-10-15-tautological-tests">here</a>). While such superfluous tests needn’t affect the validity of the study, they can make its results unintelligible, especially to readers without a strong quantitative background who might not see the forest for the trees.</p>
<p>I’m forced to make ample use of hedging here (‘can’, ‘might’) since I don’t know of any studies that have actually investigated how the number of statistical tests affects the communicative value of research papers. That said, I’m similarly concerned that presenting a plethora of descriptive and inferential statistics for a single comparison could likewise deepen the gap between quantitatively minded researchers and the rest: those in the know can either interpret all statistics or know enough to be comfortable with ignoring the rest; others, however, may lack these heuristics, figuring that they’re simply unable to make much sense of several of the numbers reported.</p>
<p>This, of course, is an unverified assumption, but one that warrants some thought. The implication would be that we should think twice about reporting statistics that carry little or no new or relevant information, especially if these statistics aren’t part and parcel of most readers’ repertoires.</p>
</section>
<section id="highlighting-the-take-home-message" class="level2">
<h2 class="anchored" data-anchor-id="highlighting-the-take-home-message">Highlighting the take-home message</h2>
<p>Results sections should ideally highlight the striking features of the data in light of the research questions. Reporting fewer tests would certainly contribute to this as this makes it easier to separate the wheat from the chaff. Carefully considering how best to present the results and the tests that have been carried out would, too.</p>
<p>To be clear, I am <em>not</em> saying that running several tests or transforming your data in several ways and then picking whichever test happened to confirm your hypothesis is a viable alternative. What I mean is that, before actually running any statistics, you try to think through possible representations of the data, pick the most concise and informative one, and then present it.</p>
</section>
<section id="a-look-at-daniëls-example" class="level2">
<h2 class="anchored" data-anchor-id="a-look-at-daniëls-example">A look at Daniël’s example</h2>
<p>Admittedly, these two considerations are as yet rather vague. Helpfully, Daniël provided an example of how he would write up the results of a <a href="http://en.wikipedia.org/wiki/Stroop_effect">Stroop task</a> conducted in one of his psychology classes and he has challenged me to come up with a better way of reporting this:</p>
<blockquote class="blockquote">
<p>The mean reaction times of 95 participants in the Congruent condition (M = 14.88, SD = 4.50) was smaller than the mean of participants in the Incongruent condition (M = 23.69, SD = 5.41, dependent measures correlate r = 0.30). The average difference between conditions is -8.81 seconds (SD = 5.91), 95% CI = [-10.01;-7.61], t(94) = -14.54, p &lt; 0.001, Hedges’ g = -1.76, 95% CI [-2.12;-1.42]. The data are logBF10 = 52.12 times more probable under the alternative hypothesis than under the null hypothesis.</p>
</blockquote>
<p>I’ll first try to spell out my thoughts when I first read this example. I’ll then share my thoughts about I might go about reporting these Stroop data.</p>
<ul>
<li><p>The main rationale for reporting several of these statistics is that they can then be included in meta-analyses. But the 95% confidence interval, the <em>t</em>-test and its associated <em>p</em>-value, standardised effect size (Hedges’ <em>g</em>) and its 95% confidence interval as well as the Bayes factor (logBF10) are all direct functions of the descriptive statistics that were provided. Surely anyone intending to run a meta-analysis should be able to derive such measures from the statistics provided.</p></li>
<li><p>From my patchy knowledge of Bayesian statistics, I would think that the Bayes factor only makes sense when comparing two specific models (the null hypothesis and the alternative hypothesis). How is the alternative hypothesis specified in this case? I assumed that this Bayes factor was computed using the default settings in <code>BayesFactor</code> package for R, but I wouldn’t think that this knowledge is readily available to most readers. Perhaps it would be useful to make the competing Bayesian prior distributions more explicit first. That said, if the prior distributions are made scrutable, I’m not against reporting Bayesian statistics per se, and I like the idea of using them in an intelligible sentence (but should we remember the ‘52.12’ or rather a 1 followed by 52 zeros, i.e.&nbsp;1 × 10^52?).</p></li>
<li><p>I’ve written about standardised effect sizes (here: Hedges’ <em>g</em>) <a href="../2015-02-05-standardised-vs-unstandardised-es">before</a>, and I don’t think this is one of the cases where they contribute meaningful information. Since I don’t think Hedges’ <em>g</em> is common currency amongst most of <em>my</em> potential readers (your situation may be different), I’d axe it. I’ll address the question whether not reporting such standardised effect sizes endangers the potential for comparisons between studies below.</p></li>
<li><p>Even though Daniël makes the case for reporting more statistics, this example only features a fraction of the statistics that could reasonably have been reported (medians, MADs, number of participants who show a Stroop effect vs those who don’t; Wilcoxon signed rank test, sign test, permutation tests, regressions, perhaps some machine-learning algorithms I haven’t thought of etc.), illustrating that we necessarily have to exercise selectivity when reporting statistics.</p></li>
<li><p>If the reading times weren’t measured with centisecond accuracy, keeping only two significant figures may be <a href="../2015-01-14-overaccuracy">better</a>.</p></li>
<li><p>Is the Stroop effect best thought of as a 9-second average difference between reading times in the congruent and the incongruent condition? (I’d lose the minus sign, too, but now I’m splitting hairs.) To elaborate, do we conceive of the Stroop effect as an <em>additive shift</em> (i.e.&nbsp;take your reading time in the congruent condition, add the Stroop effect and there you have your reading time in the incongruent condition, give or take an error term) or would we rather think of it as a <em>multiplicative</em> effect (i.e.&nbsp;take your reading time in the congruent condition, multiply by the Stroop effect and out comes your reading time in the incongruent condition, give or take an error term).</p></li>
</ul>
<p>This may sound like nit-picking, but whether we think of the Stroop effect as an additive or a multiplicative effect should affect how we present the results. I’m not on top of the Stroop literature, but <a href="http://dx.doi.org/10.1080/01688639708403869">Uttl and Graf (1997)</a> discuss a study that nicely illustrates why the difference is important. A Stroop task was administered to middle-old and old-old participants. The middle-old participants showed a difference of 495 ms per item between the congruent (592 ms/item) and the incongruent condition (1087 ms/item), whereas old-old participants showed an effect of 710 ms per item (854 vs 1564 ms). This could be interpreted as evidence for an Age-by-Condition interaction. But if instead of calculating differences in reading times, we calculate ratios of reading times, we find that both groups show a multiplicative Stroop effect of 1.8: to arrive at the reading time in the incongruent condition, you have to multiply the reading time in the congruent condition by 1.8 (i.e.&nbsp;add 80%) in both cases.</p>
<p>I’m not an expert on the Stroop task, but I think that, in light of such findings, the Stroop effect is best understood as a multiplicative effect. But I might be wrong. Daniël’s data, which he was kind enough to share, don’t really provide compelling evidence for either position.</p>
<p>Note, incidentally, that if we compute Stroop <em>ratios</em> rather than <em>differences</em>, we can directly compare studies without needing to bother with ‘standardised’ effect sizes: the reading time ratios can straigthforwardly be compared between studies.</p>
<p>Another way to standardise the Stroop effect so that it can be compared across studies would be to divide the total reading times by the number of items (seconds needed per item) or their reciprocal, i.e.&nbsp;speeds (number of items read per second).</p>
<ul>
<li>Regardless of whether the Stroop effect is best thought of as additive or multiplicative, a detailed reporting based on the <em>average</em> effect can obfuscate some important trends that would seem relevant for meta-analytical purposes. Such patterns may be worth highlighting even if they weren’t of primary importance to the researchers themselves.</li>
</ul>
<p>Daniël has kindly provided me with his dataset so that I can illustrate what I mean. In the two plots below, I’ve plotted the Stroop effect (left: difference scores, right: ratio scores) against the participants’ reading times in the congruent (baseline) condition. The dashed horizontal lines indicate the expected effect if there weren’t any Stroop effect. Since all but five out of 95 participants show a Stroop effect, we’d already be pretty confident about the existence of the effect, and the inferential statistics are an afterthought at best.</p>
<p><img src="../../figs/2015-03-03-more-selective-approach/unnamed-chunk-1-1.png" class="img-fluid"></p>
<p>More interestingly, we can discern a negative pattern in these data. This is likely due to regression to the mean (slow participants sped up relative to fast participants). But this negative pattern could give rise to spurious contradictions between studies that only report averages (be it in great detail). For instance, if another study were to sample participants with faster reading times in the congruent condition and find a much more larger average Stroop effect than Daniël did, the two findings aren’t necessarily in contradiction given this negative trend.</p>
<p>There’s no doubt that there’s a Stroop effect in these data (90 out of 95 participants show it), but such systematic variation in the Stroop effect forces us to think about whether it makes sense to report a single average Stroop effect. I’m not in a position to answer this question, but in any case, I think it would make sense to highlight this pattern.</p>
</section>
<section id="an-alternative-write-up" class="level2">
<h2 class="anchored" data-anchor-id="an-alternative-write-up">An alternative write-up</h2>
<p>Assuming that both conditions contained 30 items and that I’d have to report a global average Stroop effect, my summary of these data might read something like this:</p>
<blockquote class="blockquote">
<p>Across the 95 participants, the mean reading time per item in the incongruent condition (M = 0.79 s, SD = 0.18 s) was 1.7 ± 0.5 (mean ± SD) times as large as in the congruent condition (M = 0.50 s, SD = 0.15 s). We note, however, that the effect seems to vary systematically with the baseline reading times such that slow readers in the congruent condition showed smaller or no Stroop effects (see Figure X).</p>
</blockquote>
<p><img src="../../figs/2015-03-03-more-selective-approach/unnamed-chunk-2-1.png" class="img-fluid"></p>
<p>I’ve assumed that the average (multiplicative) effect is what is of interest here, so that is what I have highlighted both in my description and in the graph.</p>
<p>If for some reason, I couldn’t share the dataset, I’d probably also report the intercorrelation between the two dependent measures. I’d probably also add a one-sample <em>t</em>-test on the individual participants’ Stroop ratios (with H0: μ = 1) to anticipate any reviewer comments, though I think the ‘1.7 ± 0.5’ is pretty convincing, especially considering the graph.</p>
<p>If the negative trend is of further importance, though, a regression model (in which <code>Incongruent</code> is modeled as a function of <code>Congruent</code> centred at its central tendency) could be more useful than a comparisons of means. The intercept of such a model would indicate the Stroop effect for participant with an average reading time in the congruent condition, whereas the slope would indicate how the effect varies as a function of the baseline reading times.</p>
<p>These considerations are <strong>specific to this example</strong>, but I think considering each type of data in its own right makes sense. And obviously, this write-up could no doubt be improved upon.</p>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping up</h2>
<p>I don’t want to give off the impression that my write-ups are exemplary. When re-reading older drafts or published papers, I more often than not wonder whether I could’ve done a better job at presenting my results. But my worry is always that I may have reported <em>too much</em> information – not too little.</p>
<p>I don’t want to overstate the extent to which I beg to disagree with Daniël’s blog post. We both advocate ‘open science’ and we both want to communicate our results as optimally as possible. I just think that this entails reporting fewer rather than more statistics. Perhaps this is because I, as well as most people I work with and write for, haven’t had a formal education in statistics and too often had to skip utterly unintelligible results sections as a result.</p>
<p>In any case – whether or not my arguments apply when writing to audiences with strong quantitative backgrounds – I hope that my write-up at least illustrates that a simple graph can highlight striking patterns that a <em>t</em>-test, even when reported in great detail, just can’t.</p>
</section>
<section id="acknowledgements-and-further-reading" class="level2">
<h2 class="anchored" data-anchor-id="acknowledgements-and-further-reading">Acknowledgements and further reading</h2>
<p>Thanks to <a href="http://www.danielezrajohnson.com/">Daniel Ezra Johnson</a> for his comments on an earlier draft.</p>
<p>Many of the points discussed here were inspired by Robert P. Abelson’s <a href="https://books.google.ch/books?id=yQLFl1ILjZwC"><em>Statistics as principled argument</em></a> and William S. Cleveland’s <a href="https://books.google.ch/books?id=V-dQAAAAMAAJ"><em>Visualizing data</em></a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>